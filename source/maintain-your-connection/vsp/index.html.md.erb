---
title: Verify Service Provider
weight: 10
---

# Verify Service Provider

These instructions apply to you if you're using the Verify Service Provider (VSP). If you're not using the VSP, [see the instructions on updating your service provider encryption keys][sp-keys].

<%= partial "partials/get-self-signed-certificates" %>

## Update the encryption key and certificate

1. Generate a new self-signed encryption certificate for your VSP.
1. Add your new VSP private encryption key to the `samlSecondaryEncryptionKey` field in the VSP configuration file.
1. Restart the VSP to implement the configuration changes. The VSP can now use both the new and old keys to decrypt SAML messages.
1. [Upload your new self-signed encryption certificate to the GOV.UK Verify Service Admin tool](https://connecting-to-verify-prototype.herokuapp.com/self-serve/before-you-start-vsp-encryption).
1. Receive e-mail confirmation that the GOV.UK Verify team have deployed your encryption certificate.
1. Replace the key in `samlPrimaryEncryptionKey` with the key from `samlSecondaryEncryptionKey` and leave `samlSecondaryEncryptionKey` empty for the next key update.
1. Restart the VSP to implement the configuration changes.

Your service now uses the new VSP encryption key to decrypt SAML messages.

## Update the signing key and certificate

1. Generate a new self-signed signing certificate for your VSP.
1. [Upload your new signing certificate to the GOV.UK Verify Service Admin tool](https://connecting-to-verify-prototype.herokuapp.com/self-serve/before-you-start-vsp-signing).
1. Receive e-mail confirmation that the GOV.UK Verify team have deployed your signing certificate.
1. Replace the old signing key under `samlSigningKey` in the VSP configuration with the new key.
1. Restart the VSP to implement the configuration changes. The VSP now signs SAML messages with the new key.

The GOV.UK Verify hub now trusts SAML messages signed with your new VSP signing key.

<%= partial "partials/links" %>
