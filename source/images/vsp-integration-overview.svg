<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="765px" preserveAspectRatio="none" style="width:882px;height:765px;" version="1.1" viewBox="0 0 882 765" width="882px" zoomAndPan="magnify"><defs/><g><rect fill="#D3D3D3" height="750.3672" style="stroke: #FFFFFF; stroke-width: 1.0;" width="397.5" x="356" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="484.75" y="16.0669">Your infrastructure</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="49" x2="49" y1="57.9219" y2="716.5781"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="397" x2="397" y1="57.9219" y2="716.5781"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="726.5" x2="726.5" y1="57.9219" y2="716.5781"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="822.5" x2="822.5" y1="57.9219" y2="716.5781"/><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="83" x="8" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="69" x="15" y="45.9126">Browser</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="83" x="8" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="69" x="15" y="738.3579">Browser</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="75" x="360" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="61" x="367" y="45.9126">Service</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="75" x="360" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="61" x="367" y="738.3579">Service</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="46" x="703.5" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="32" x="710.5" y="45.9126">VSP</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="46" x="703.5" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="32" x="710.5" y="738.3579">VSP</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="86" x="779.5" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="72" x="786.5" y="45.9126">Test tool</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="86" x="779.5" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="72" x="786.5" y="738.3579">Test tool</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="867.5" x="3" y="88.4883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="88.4883" y2="88.4883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="91.4883" y2="91.4883"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="147" x="363.25" y="77.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="369.25" y="93.9888">Initialise test tool</text><polygon fill="#000000" points="810.5,128.1875,820.5,132.1875,810.5,136.1875,814.5,132.1875" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="49.5" x2="816.5" y1="132.1875" y2="132.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="56.5" y="127.1216">Request to initialise Compliance Tool</text><polygon fill="#000000" points="60.5,157.3203,50.5,161.3203,60.5,165.3203,56.5,161.3203" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="54.5" x2="821.5" y1="161.3203" y2="161.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="66.5" y="156.2544">Confirm Compliance Tool has been initialised</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="867.5" x="3" y="189.8867"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="189.8867" y2="189.8867"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="192.8867" y2="192.8867"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="118" x="377.75" y="179.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="383.75" y="195.3872">Send request</text><polygon fill="#000000" points="385.5,229.5859,395.5,233.5859,385.5,237.5859,389.5,233.5859" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="49.5" x2="391.5" y1="233.5859" y2="233.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="56.5" y="228.52">User starts journey from browser</text><polygon fill="#000000" points="714.5,258.7188,724.5,262.7188,714.5,266.7188,718.5,262.7188" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="397.5" x2="720.5" y1="262.7188" y2="262.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="404.5" y="257.6528">POST JSON to /generate-request</text><polygon fill="#000000" points="408.5,287.8516,398.5,291.8516,408.5,295.8516,404.5,291.8516" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="402.5" x2="725.5" y1="291.8516" y2="291.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="414.5" y="286.7856">receive SAML AuthnRequest</text><polygon fill="#000000" points="60.5,316.9844,50.5,320.9844,60.5,324.9844,56.5,320.9844" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="54.5" x2="396.5" y1="320.9844" y2="320.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="66.5" y="315.9185">send AuthnRequest in an HTML form</text><polygon fill="#000000" points="810.5,346.1172,820.5,350.1172,810.5,354.1172,814.5,350.1172" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="49.5" x2="816.5" y1="350.1172" y2="350.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="56.5" y="345.0513">POST HTML form containing SAML AuthnRequest</text><polygon fill="#000000" points="60.5,375.25,50.5,379.25,60.5,383.25,56.5,379.25" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="54.5" x2="821.5" y1="379.25" y2="379.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="66.5" y="374.1841">Returns URL with test scenarios</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="867.5" x="3" y="407.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="407.8164" y2="407.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="410.8164" y2="410.8164"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="174" x="349.75" y="397.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="355.75" y="413.3169">Choose test scenario</text><polygon fill="#000000" points="810.5,447.5156,820.5,451.5156,810.5,455.5156,814.5,451.5156" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="49.5" x2="816.5" y1="451.5156" y2="451.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="56.5" y="446.4497">Go to the URL with test scenarios</text><polygon fill="#000000" points="60.5,476.6484,50.5,480.6484,60.5,484.6484,56.5,480.6484" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="54.5" x2="821.5" y1="480.6484" y2="480.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="66.5" y="475.5825">See list of test scenarios in browser</text><polygon fill="#000000" points="810.5,505.7813,820.5,509.7813,810.5,513.7813,814.5,509.7813" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="49.5" x2="816.5" y1="509.7813" y2="509.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="56.5" y="504.7153">Select scenario to test from list</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="867.5" x="3" y="538.3477"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="538.3477" y2="538.3477"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="870.5" y1="541.3477" y2="541.3477"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="144" x="364.75" y="527.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="370.75" y="543.8481">Handle response</text><polygon fill="#000000" points="60.5,578.0469,50.5,582.0469,60.5,586.0469,56.5,582.0469" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="54.5" x2="821.5" y1="582.0469" y2="582.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="66.5" y="576.981">Returns SAML Response for selected scenario</text><polygon fill="#000000" points="385.5,607.1797,395.5,611.1797,385.5,615.1797,389.5,611.1797" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="49.5" x2="391.5" y1="611.1797" y2="611.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="324" x="56.5" y="606.1138">Sends SAML Response to /your-response-endpoint</text><polygon fill="#000000" points="714.5,636.3125,724.5,640.3125,714.5,644.3125,718.5,640.3125" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="397.5" x2="720.5" y1="640.3125" y2="640.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="404.5" y="635.2466">POST SAML Response to /translate-response</text><polygon fill="#000000" points="408.5,665.4453,398.5,669.4453,408.5,673.4453,404.5,669.4453" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="402.5" x2="725.5" y1="669.4453" y2="669.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="414.5" y="664.3794">HTTP 200 with corresponding scenario response</text><polygon fill="#000000" points="60.5,694.5781,50.5,698.5781,60.5,702.5781,56.5,698.5781" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="54.5" x2="396.5" y1="698.5781" y2="698.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="66.5" y="693.5122">Scenario-appropriate information for the user</text><!--
@startuml
skinparam backgroundColor #FFFFFF
skinparam shadowing false
skinparam BoxPadding 20

skinparam sequence {
	ArrowColor Black
	ActorBorderColor Black
	BoxBorderColor White
	LifeLineBorderColor Black
	LifeLineBackgroundColor #FFFFFF
	
	ParticipantBorderColor Black
	ParticipantBackgroundColor White
	ParticipantFontName Helvetica
	ParticipantFontSize 17
	ParticipantFontColor #000000
}

participant Browser
box "Your infrastructure" #LightGray
	participant Service
	participant VSP
end box
participant "Test tool"

== Initialise test tool ==

Browser -> "Test tool" : Request to initialise Compliance Tool
"Test tool" -> Browser : Confirm Compliance Tool has been initialised

== Send request ==

Browser -> Service : User starts journey from browser
Service -> VSP : POST JSON to /generate-request
VSP -> Service : receive SAML AuthnRequest
Service -> Browser : send AuthnRequest in an HTML form

Browser -> "Test tool" : POST HTML form containing SAML AuthnRequest
"Test tool" -> Browser : Returns URL with test scenarios

== Choose test scenario ==

Browser -> "Test tool" : Go to the URL with test scenarios
"Test tool" -> Browser : See list of test scenarios in browser
Browser -> "Test tool" : Select scenario to test from list

== Handle response ==

"Test tool" -> Browser : Returns SAML Response for selected scenario

Browser -> Service : Sends SAML Response to /your-response-endpoint
Service -> VSP : POST SAML Response to /translate-response
VSP -> Service : HTTP 200 with corresponding scenario response
Service -> Browser : Scenario-appropriate information for the user
@enduml

PlantUML version 1.2019.00(Sun Jan 13 15:46:42 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>