<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="765px" preserveAspectRatio="none" style="width:907px;height:765px;" version="1.1" viewBox="0 0 907 765" width="907px" zoomAndPan="magnify"><defs/><g><rect fill="#D3D3D3" height="750.3672" style="stroke: #FFFFFF; stroke-width: 1.0;" width="328.5" x="24" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="118.25" y="16.0669">Your infrastructure</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="57.9219" y2="716.5781"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="310.5" x2="310.5" y1="57.9219" y2="716.5781"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="583.5" x2="583.5" y1="57.9219" y2="716.5781"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="847" x2="847" y1="57.9219" y2="716.5781"/><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="46" x="28" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="32" x="35" y="45.9126">VSP</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="46" x="28" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="32" x="35" y="738.3579">VSP</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="75" x="273.5" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="61" x="280.5" y="45.9126">Service</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="75" x="273.5" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="61" x="280.5" y="738.3579">Service</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="83" x="542.5" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="69" x="549.5" y="45.9126">Browser</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="83" x="542.5" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="69" x="549.5" y="738.3579">Browser</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="86" x="804" y="23.1328"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="72" x="811" y="45.9126">Test tool</text><rect fill="#FFFFFF" height="33.7891" style="stroke: #000000; stroke-width: 1.5;" width="86" x="804" y="715.5781"/><text fill="#000000" font-family="Helvetica" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="72" x="811" y="738.3579">Test tool</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="892" x="3" y="88.4883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="88.4883" y2="88.4883"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="91.4883" y2="91.4883"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="147" x="375.5" y="77.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="381.5" y="93.9888">Initialise test tool</text><polygon fill="#000000" points="835,128.1875,845,132.1875,835,136.1875,839,132.1875" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="51" x2="841" y1="132.1875" y2="132.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="58" y="127.1216">[?] Request to initialise test tool</text><polygon fill="#000000" points="62,157.3203,52,161.3203,62,165.3203,58,161.3203" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="56" x2="846" y1="161.3203" y2="161.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="68" y="156.2544">[?] Confirm the test tool has been initialised</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="892" x="3" y="189.8867"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="189.8867" y2="189.8867"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="192.8867" y2="192.8867"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="118" x="390" y="179.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="396" y="195.3872">Send request</text><polygon fill="#000000" points="322,229.5859,312,233.5859,322,237.5859,318,233.5859" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="316" x2="583" y1="233.5859" y2="233.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="328" y="228.52">User starts journey from browser</text><polygon fill="#000000" points="62,258.7188,52,262.7188,62,266.7188,58,262.7188" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="56" x2="310" y1="262.7188" y2="262.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="68" y="257.6528">Generate SAML AuthnRequest</text><polygon fill="#000000" points="299,287.8516,309,291.8516,299,295.8516,303,291.8516" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="51" x2="305" y1="291.8516" y2="291.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="58" y="286.7856">Return SAML AuthnRequest</text><polygon fill="#000000" points="572,316.9844,582,320.9844,572,324.9844,576,320.9844" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="311" x2="578" y1="320.9844" y2="320.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="318" y="315.9185">Send AuthnRequest in an HTML form</text><polygon fill="#000000" points="835,346.1172,845,350.1172,835,354.1172,839,350.1172" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="584" x2="841" y1="350.1172" y2="350.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="591" y="345.0513">Auto-POST HTML form</text><polygon fill="#000000" points="595,375.25,585,379.25,595,383.25,591,379.25" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="589" x2="846" y1="379.25" y2="379.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="601" y="374.1841">Return scenario generator URL</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="892" x="3" y="407.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="407.8164" y2="407.8164"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="410.8164" y2="410.8164"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="174" x="362" y="397.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="368" y="413.3169">Choose test scenario</text><polygon fill="#000000" points="835,447.5156,845,451.5156,835,455.5156,839,451.5156" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="584" x2="841" y1="451.5156" y2="451.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="591" y="446.4497">Go to the scenario generator URL</text><polygon fill="#000000" points="595,476.6484,585,480.6484,595,484.6484,591,480.6484" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="589" x2="846" y1="480.6484" y2="480.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="601" y="475.5825">See list of test scenarios</text><polygon fill="#000000" points="835,505.7813,845,509.7813,835,513.7813,839,509.7813" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="584" x2="841" y1="509.7813" y2="509.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="591" y="504.7153">Select scenario to test from list</text><rect fill="#EEEEEE" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="892" x="3" y="538.3477"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="538.3477" y2="538.3477"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="895" y1="541.3477" y2="541.3477"/><rect fill="#EEEEEE" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="144" x="377" y="527.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="383" y="543.8481">Handle response</text><polygon fill="#000000" points="595,578.0469,585,582.0469,595,586.0469,591,582.0469" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="589" x2="846" y1="582.0469" y2="582.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="601" y="576.981">SAML Response for selected scenario</text><polygon fill="#000000" points="322,607.1797,312,611.1797,322,615.1797,318,611.1797" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="316" x2="583" y1="611.1797" y2="611.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="328" y="606.1138">Forward SAML Response</text><polygon fill="#000000" points="62,636.3125,52,640.3125,62,644.3125,58,640.3125" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="56" x2="310" y1="640.3125" y2="640.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="68" y="635.2466">Request to translate SAML Response</text><polygon fill="#000000" points="299,665.4453,309,669.4453,299,673.4453,303,669.4453" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="51" x2="305" y1="669.4453" y2="669.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="58" y="664.3794">Return translated Response</text><polygon fill="#000000" points="572,694.5781,582,698.5781,572,702.5781,576,698.5781" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="311" x2="578" y1="698.5781" y2="698.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="318" y="693.5122">Scenario-appropriate page for the user</text><!--
@startuml
skinparam backgroundColor #FFFFFF
skinparam shadowing false
skinparam BoxPadding 20

skinparam sequence {
	ArrowColor Black
	ActorBorderColor Black
	BoxBorderColor White
	LifeLineBorderColor Black
	LifeLineBackgroundColor #FFFFFF
	
	ParticipantBorderColor Black
	ParticipantBackgroundColor White
	ParticipantFontName Helvetica
	ParticipantFontSize 17
	ParticipantFontColor #000000
}


box "Your infrastructure" #LightGray
	participant VSP
	participant Service
end box
participant Browser
participant "Test tool"

== Initialise test tool ==

VSP -> "Test tool" : [?] Request to initialise test tool
"Test tool" -> VSP : [?] Confirm the test tool has been initialised

== Send request ==

Browser -> Service : User starts journey from browser
Service -> VSP : Generate SAML AuthnRequest
VSP -> Service : Return SAML AuthnRequest
Service -> Browser : Send AuthnRequest in an HTML form

Browser -> "Test tool" : Auto-POST HTML form
"Test tool" -> Browser : Return scenario generator URL

== Choose test scenario ==

Browser -> "Test tool" : Go to the scenario generator URL
"Test tool" -> Browser : See list of test scenarios
Browser -> "Test tool" : Select scenario to test from list

== Handle response ==

"Test tool" -> Browser : SAML Response for selected scenario

Browser -> Service : Forward SAML Response
Service -> VSP : Request to translate SAML Response
VSP -> Service : Return translated Response
Service -> Browser : Scenario-appropriate page for the user
@enduml

PlantUML version 1.2019.00(Sun Jan 13 15:46:42 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>